[
Solve this logic riddle in the most effective way. Do NOT solve it manually,
trying step by step. Solve it intelligently. Output the complete code to run
it in Python.
]


Solve this puzzle in the most effective way.

You are trapped in a skyscraper with an elevator system that operates under
peculiar rules.  Each floor has a unique condition that determines how the
elevator moves.  Your goal is to reach the top floor (Floor 30) starting from
the ground floor (Floor 0), using the elevator efficiently.

Elevator Rules:

    Button A:  Moves you up n+1 floors, where n is the current floor number.  If
    this action lands you on a floor divisible by 5, the elevator sends you back
    to n/2.

    Button B:  Moves you up 4 floors but subtracts 3 from the new floor if the
    resulting floor is even.

    Button C:  Moves you down 7 floors, but if the floor you land on is a prime
    number, you immediately bounce back up 10 floors.

    Button D:  Moves you to the next floor that is a multiple of 3 (always up).

    Button E:  Moves you up 2 floors and doubles the number of floors moved if
    the current floor number is odd.

Challenge:

    Determine the shortest sequence of button presses to reach Floor 30.

    Track your movement across all floors and provide a step-by-step explanation
    of your path.

    If multiple paths are possible, find the one with the fewest presses and
    explain why it is optimal.

Extra Layer of Complexity:

Introduce "trap floors":

    Trap Floor 13: You cannot press any button other than Button D here.

    Trap Floor 22: If you land here, you are forced to go back to Floor 10.

--------------------------------------------------------------------------------

We have to make some guesses here. The following is undefined:

What happens when pressing a button would take the elevator out of range?

It think it's reasonable that if a step would take the elevator out of range,
the elevator would stop moving and stop processing any further steps for the
current button push. Some button presses have more than one step, for example
Button B:

    Moves you up 4 floors but subtracts 3 from the new floor if the resulting
    floor is even.

I take this to mean the elevator moves up 4 floors, then if that floor is even,
drops you back down 3 floors. I take this as two steps. The top floor is 30. If
you're on the 38th floor, +4 would be out of range and no movement would be
expected, and it would not go to the 29th floor (37 + 4 - 3) because 37 + 4 is
(effectivly) an overflow condition.

